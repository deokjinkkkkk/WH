<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="co.admin.wh.notice.mapper.CompanionMapper">

	<insert id="companionInsert" parameterType="co.admin.wh.notice.vo.CompanionVO">
		<selectKey keyProperty="compCode" resultType="int" order="BEFORE">
       SELECT MAX(COMP_CODE)+1 FROM COMPANION
      </selectKey>
		INSERT INTO COMPANION (COMP_CODE, ID, COMP_GROUP,COMP_TITLE,COMP_COUNT, COMP_START_DATE, COMP_END_DATE, COMP_CONTENT,IMG_GRO_CODE)
		
		VALUES (#{compCode},#{id},#{compGroup}, #{compTitle}, #{compCount},#{compStartDate},#{compEndDate}, #{compContent}, #{imgGroCode})
	</insert >
	
	<insert id="imgInsert" parameterType="co.admin.wh.common.vo.ImageVO">
		<selectKey keyProperty="imgCode" resultType="int" order="BEFORE">
       SELECT MAX(IMG_CODE)+1 FROM IMAGE
      </selectKey>
		INSERT INTO IMAGE (IMG_CODE,IMG_NAME, IMG_PATH, IMG_GRO_CODE)
		
		VALUES (#{imgCode},#{imgName},#{imgPath}, #{imgGroCode})
	</insert>
	
	<select id="getCompanionList" resultType="co.admin.wh.notice.vo.CompanionVO">
		select *
		from companion c ,member m
        where c.id= m.id
	</select>
	
	<select id="detailSelect" resultType="co.admin.wh.notice.vo.CompanionVO">
		select *
		from companion
		where comp_code = #{compCode}
	</select>
</mapper>