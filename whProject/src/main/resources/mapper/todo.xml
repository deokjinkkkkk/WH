<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="co.admin.wh.todo.mapper.TodoMapper">

<select id="TodoList"
		resultType="co.admin.wh.todo.vo.TodoVO">
	SELECT t.*, tag.tag_name
    	FROM TO_DO_LIST t
    	INNER JOIN member m ON t.id = m.id
    	LEFT JOIN todo_tag todoTag ON t.to_do_code = todoTag.todo_tag_code
    	LEFT JOIN tag ON todoTag.tag_code = tag.tag_code
    ORDER BY t.to_do_code ASC
</select>

<insert id="todoInsert">
	<selectKey keyProperty="todoCode" resultType="int" order="BEFORE">
	select NVL(max(to_do_code),0) + 1 
	from to_do_list
	</selectKey>
		INSERT INTO TO_DO_LIST
		VALUES(#{todoCode},
				#{id},
				#{todoContent},
				#{todoDate},
				#{todoFlag})
</insert>


<delete id="todoDelete">
	DELETE FROM to_do_list
	WHERE to_do_code = #{todoCode}
</delete>


</mapper>