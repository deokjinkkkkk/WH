<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="co.admin.wh.notice.mapper.VideoMapper">
		<insert id="videoInsert"
		parameterType="co.admin.wh.notice.vo.VideoVO">
		<selectKey keyProperty="videoCode" resultType="int"
			order="BEFORE">
			SELECT NVL(MAX(video_code),0)+1 FROM video
		</selectKey>

		INSERT INTO video (video_code,video_name, video_content, video_hit, video_reg_date, VIDEO_REGION, url,thumbnail )

		VALUES (#{videoCode},#{videoName},#{videoContent},
		0,
		sysdate,#{videoRegion},#{url},#{thumbnail})
	</insert>
	
	<select id="videoSelect" resultType="co.admin.wh.notice.vo.VideoVO">
	SELECT * FROM( SELECT rownum rn, a.* FROM(
	 SELECT * FROM VIDEO
	 <![CDATA[
		) a WHERE rownum <= #{last} ) b WHERE rn >= #{first}		
		]]>	
	
	</select>
	
	<select id="videoDetail" resultType="co.admin.wh.notice.vo.VideoVO">
	 SELECT * FROM VIDEO where video_code = #{videoCode}
	
	</select>
	
	<select id="videoTotal" parameterType="co.admin.wh.notice.vo.VideoSearchVO" resultType="int">
		select count(*) from video
	</select>
	
	<select id="seoul" parameterType="VideoVO" resultType="co.admin.wh.notice.vo.VideoVO">
    	SELECT * FROM( SELECT rownum rn, a.* FROM(
	    	select *
	    	from video where video_region = '11'
	    <![CDATA[
		) a WHERE rownum <= #{last} ) b WHERE rn >= #{first}		
		]]>	
    </select>
    
	<select id="busan" parameterType="VideoVO" resultType="co.admin.wh.notice.vo.VideoVO">
    	SELECT * FROM( SELECT rownum rn, a.* FROM(
	    	select *
	    	from video where video_region = '21'
	    <![CDATA[
		) a WHERE rownum <= #{last} ) b WHERE rn >= #{first}		
		]]>	
    </select>
    
	<select id="daegu" parameterType="VideoVO" resultType="co.admin.wh.notice.vo.VideoVO">
    	SELECT * FROM( SELECT rownum rn, a.* FROM(
	    	select *
	    	from video where video_region = '22'
	    <![CDATA[
		) a WHERE rownum <= #{last} ) b WHERE rn >= #{first}		
		]]>	
    </select>
	
</mapper>