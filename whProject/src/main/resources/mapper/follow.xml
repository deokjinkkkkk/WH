<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="co.admin.wh.diary.mapper.FollowMapper">

	<!-- 팔로워 리스트/ 신청 받은(친구 신청 받은) -->
	<select id="followerList"
		resultType="co.admin.wh.diary.vo.FollowVO">
		select f.*
		from follow f join member m
		on f.following_id = m.id
		where f.follow_id =#{id}
	</select>

	<!-- 팔로잉 리스트 /내가 팔로우 한 회원 (로그인한 회원) -->
	<select id="followingList"
		resultType="co.admin.wh.diary.vo.FollowVO">
		select f.*
		from follow f join member m
		on f.following_id = m.id
		where f.follow_id =#{id}
	</select>

	<!-- 팔로워, 팔로잉 수 -->
	<select id="followCount" resultType="map">
		select count(case when
		follow_id = #{id} then 1 end)as
		followerCount,
		count(case when
		following_id =#{id} then 1 end) as followeeCount
		from follow
	</select>

	<!-- 팔로잉 체크 확인  -->
	<select id="checkFollow" resultType="boolean">
		select count(*)
		from follow
		where following_id = #{id}
		and follow_id = #{id}
	</select>


	<!-- 팔로잉 하기 -->
	<insert id="insertFollow">
		INSERT INTO FOLLOW
		VALUES (#{followId}, #{followingId})
	</insert>

	<!--언팔 -->
	<delete id="unFollow" >
		DELETE FROM FOLLOW
		WHERE
		FOLLOWING_ID =#{followingId}
		AND FOLLOW_ID = #{followId}
	</delete>


</mapper>