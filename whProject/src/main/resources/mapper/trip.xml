<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="co.admin.wh.trip.mapper.TripMapper">


	<!-- 검색시 데이터 체크해서 없는데이터 넣기 위해 ignore로 중복시 무시하도록 처리 -->
	<insert id="insertInfo">
	<selectKey resultType="int" keyProperty="tripCode" order="BEFORE">
		SELECT NVL(MAX(trip_Code),0)+1 FROM TRIP
	</selectKey>

			INSERT INTO TRIP (TRIP_CODE, TRIP_NAME, TRIP_TEL, TRIP_ADDR,
			TRIP_LAT, TRIP_LON,
			TRIP_SUMM, TRIP_CONTENT, HOMEPAGE, TRIP_REGION, IMG_GRO_CODE, TRIP_DATE)
			VALUES(#{tripCode}, #{tripName}, #{tripTel}, #{tripAddr}, #{tripLat},
			#{tripLon},
			#{tripSumm}, #{tripContent}, #{homepage}, #{tripRegion}, #{imgGroCode},
			#{tripDate})

	</insert>

	<select id="tripList" resultType="co.admin.wh.trip.vo.TripVO">
	<!-- 이미지가 없는 데이터는 출력하지 않는다. -->
		SELECT * 
		FROM TRIP
		WHERE LENGTH(img_gro_code)>=1
	</select>


</mapper>