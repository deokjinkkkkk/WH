<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{index}">

<head>

<meta charset="UTF-8">
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

</head>

<body>
	<div layout:fragment="content">
		<!-- 배너시작 -->
		<section class="page-title-section bg-img cover-background"
			th:style="|background: url('/img/banner/bg1.jpg')|">
			<h1 class="text-white font-weight-600">todolist</h1>
			<ul>
				<li><a href="/main">Home</a></li>
				<li><a href="/">todolist</a></li>
			</ul>
		</section>
		<!-- 배너끝 -->

		<div class="todoForm">
			<form id="todoForm" method='post'>
				<div class="controls">
					<div class="row">
						<input type="hidden" name="id" value="ADMIN" id="id">
						<div class="col-md-12 form-group">
							<textarea id="todoContent" name="todoContent"
								placeholder="리스트를 입력하세요." rows="1" required="required"></textarea>
							<div class="input-group input-daterange">
								<input id="todoDate" type="date">
							</div>
						</div>
						<div class="col-md-12">
							<button type="button" id="butn" class="butn">
								<span>담기</span>
							</button>
						</div>
					</div>
				</div>
				<input type="hidden" id="todoFlag" name="todoFlag" value="1">
				<input type="hidden" id="id" name="id" >
				
				<br>
				<br>


				<!-- Nav tabs -->
				<div class="golist">
				<ul class="nav nav-tabs">
					<li class="nav-item"><a class="nav-link active"
						data-bs-toggle="tab">전체</a></li>
					<li class="nav-item"><a class="nav-link" data-bs-toggle="tab"
						href="#menu1">완료</a></li>
				</ul>

				<!-- Tab panes -->
				<div class="tab-content">
					<div class="tab-pane container active" id="home"></div>
					<div class="tab-pane container fade" id="menu1">완료</div>
				</div>
				</div>


			</form>
			

				
				<script>
				// input에 오늘날짜 기본값으로 넣기
				window.onload = function() {
					today = new Date();
					console
							.log("today.toISOString() >>>"
									+ today.toISOString());
					today = today.toISOString().slice(0, 10);
					console.log("today >>>> " + today);
					bir = document.getElementById("todoDate");
					bir.value = today;
				}
				
				$(document).ready(function(){
					getComList()
				})
				
				$("butn").click(function(){ //리스트 담기
					let todoContent = $("#todoContent").val(); //내용
					let todoId = $("#id").val(); //회원아이디
					let todoDate = $("#todoDate").val(); //날짜
					let todoCode = 1 //리스트 순서
					let todoFlag = $("#todoFlag").val();//구분(1.todolist - 2.완료)
					
				
				
				$.ajax({
					url : "/todoInsert",
					type : "POST",
					data : JSON.stringify({
						"todoContent" : todoContent,
						"id" : todoId,
						"todoDate" : todoDate,
						"todoCode" : todoCode,
						"todoFlag" : todoFlag
					}),
					
					contentType : 'application./json',
					Success : function(data) {
						console.log("todolist등록")
						$("#todoContent").val("")
						console.log("========")
						getTodoList()
					},
					error:function(){
						alert('등록 실패');
					}
				});
		
				});
				////////////
				function getTodoList(){ //리스트 가져오기
					let str = '<div class="title-g margin-30px-bottom">'
						str += '<h3>댓글</h3>'
							str +='<h3>댓글</h3>'
								str +='</div>'
							let comArea =$(".comments-area");
				}
				
			</script>

			</div>
		</div>
</body>
</html>